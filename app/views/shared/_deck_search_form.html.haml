= simple_form_for(category, method: :get, url: decks_path) do |f|
  .deck-search{'data-controller'=>'tags'}
    .deck-search-row-one
      - if params.key?('category')
        - params['category'].key?('name') ? name = params['category']['name'] : name = ''
        = f.input :name, collection: Category.generate_categories, label: 'Category', selected: name, input_html: { multiple: true }, include_blank: 'All', include_hidden: false, as: :grouped_select, group_method: :last
        - params['category'].key?('language') ? language = params['category']['language'] : language = 'en'
        = f.input :language, collection: languages.map { |key, value| [key, value] }, selected: language, required: true
      - else
        = f.input :name, collection: Category.generate_categories, label: 'Category', prompt: 'All', input_html: { multiple: true }, include_hidden: false, as: :grouped_select, group_method: :last
        = f.input :language, collection: languages.map { |key, value| [key, value] }, selected: 'en', required: true
    .deck-search-row-two
      .deck-search-tags
        - if params.key?('category')
          - params['category'].key?('tag') ? tag = params['category']['tag'] : tag = ''
          = f.input :tag, label: 'Tags', input_html: { value: tag, data: { target: 'tags.tagField', action: 'keydown->tags#change change->tags#change' } }
        - else
          = f.input :tag, label: 'Tags', input_html: { data: { target: 'tags.tagField', action: 'keydown->tags#change change->tags#change' } }
        %ul{class: 'suggestions', 'data-target'=>'tags.suggestions'}
      = f.submit 'Find cards to review', class: "btn btn-primary"

